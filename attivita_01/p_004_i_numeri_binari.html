<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="Content-type" content="text/html; charset=utf-8"/>
        <!--script type="text/javascript" src="jsgl.min.js"></script-->
    </head>
    <body>
        <table>
            <tr>
                <th>Posizione</th>
                <th>4</th>
                <th>3</th>
                <th>2</th>
                <th>1</th>
                <th>0</th>
                <th>In base 10</th>
            </tr>
            <tr>
                <th>Moltiplicatore</th>
                <th>2<sup>4</sup></th>
                <th>2<sup>3</sup></th>
                <th>2<sup>2</sup></th>
                <th>2<sup>1</sup></th>
                <th>2<sup>0</sup></th>
            </tr>
            <tr>
                <th>Moltiplicatore</th>
                <th>16</th>
                <th>8</th>
                <th>4</th>
                <th>2</th>
                <th>1</th>
            </tr>
            <tr>
                <td></td>
                <td>
                    <div id="carta_2^4" style="width: 100px; height: 100px; position: relative; overflow: hidden; cursor: default;">
                        <svg width="100" height="100" style="position: absolute; left: 0px; top: 0px;">
                            <rect x="0" y="0" width="100" height="100" rx="0" ry="0" transform="rotate(0,0,0)" style="z-index: 0; cursor: inherit; stroke: rgb(0, 0, 0); stroke-width: 5px; stroke-opacity: 1; stroke-dasharray: none; stroke-linecap: round; stroke-linejoin: round; fill: rgb(255, 255, 0); fill-opacity: 0.5;"></rect>
                            <circle cx="20" cy="20" r="5" style="z-index: 0; cursor: inherit; stroke: rgb(0, 0, 0); stroke-width: 5px; stroke-opacity: 1; stroke-dasharray: none; stroke-linecap: round; stroke-linejoin: round; fill: white; fill-opacity: 1;"></circle>
                            <circle cx="20" cy="40" r="5" style="z-index: 0; cursor: inherit; stroke: rgb(0, 0, 0); stroke-width: 5px; stroke-opacity: 1; stroke-dasharray: none; stroke-linecap: round; stroke-linejoin: round; fill: white; fill-opacity: 1;"></circle>
                            <circle cx="20" cy="60" r="5" style="z-index: 0; cursor: inherit; stroke: rgb(0, 0, 0); stroke-width: 5px; stroke-opacity: 1; stroke-dasharray: none; stroke-linecap: round; stroke-linejoin: round; fill: white; fill-opacity: 1;"></circle>
                            <circle cx="20" cy="80" r="5" style="z-index: 0; cursor: inherit; stroke: rgb(0, 0, 0); stroke-width: 5px; stroke-opacity: 1; stroke-dasharray: none; stroke-linecap: round; stroke-linejoin: round; fill: white; fill-opacity: 1;"></circle>
                            <circle cx="40" cy="20" r="5" style="z-index: 0; cursor: inherit; stroke: rgb(0, 0, 0); stroke-width: 5px; stroke-opacity: 1; stroke-dasharray: none; stroke-linecap: round; stroke-linejoin: round; fill: white; fill-opacity: 1;"></circle>
                            <circle cx="40" cy="40" r="5" style="z-index: 0; cursor: inherit; stroke: rgb(0, 0, 0); stroke-width: 5px; stroke-opacity: 1; stroke-dasharray: none; stroke-linecap: round; stroke-linejoin: round; fill: white; fill-opacity: 1;"></circle>
                            <circle cx="40" cy="60" r="5" style="z-index: 0; cursor: inherit; stroke: rgb(0, 0, 0); stroke-width: 5px; stroke-opacity: 1; stroke-dasharray: none; stroke-linecap: round; stroke-linejoin: round; fill: white; fill-opacity: 1;"></circle>
                            <circle cx="40" cy="80" r="5" style="z-index: 0; cursor: inherit; stroke: rgb(0, 0, 0); stroke-width: 5px; stroke-opacity: 1; stroke-dasharray: none; stroke-linecap: round; stroke-linejoin: round; fill: white; fill-opacity: 1;"></circle>
                            <circle cx="60" cy="20" r="5" style="z-index: 0; cursor: inherit; stroke: rgb(0, 0, 0); stroke-width: 5px; stroke-opacity: 1; stroke-dasharray: none; stroke-linecap: round; stroke-linejoin: round; fill: white; fill-opacity: 1;"></circle>
                            <circle cx="60" cy="40" r="5" style="z-index: 0; cursor: inherit; stroke: rgb(0, 0, 0); stroke-width: 5px; stroke-opacity: 1; stroke-dasharray: none; stroke-linecap: round; stroke-linejoin: round; fill: white; fill-opacity: 1;"></circle>
                            <circle cx="60" cy="60" r="5" style="z-index: 0; cursor: inherit; stroke: rgb(0, 0, 0); stroke-width: 5px; stroke-opacity: 1; stroke-dasharray: none; stroke-linecap: round; stroke-linejoin: round; fill: white; fill-opacity: 1;"></circle>
                            <circle cx="60" cy="80" r="5" style="z-index: 0; cursor: inherit; stroke: rgb(0, 0, 0); stroke-width: 5px; stroke-opacity: 1; stroke-dasharray: none; stroke-linecap: round; stroke-linejoin: round; fill: white; fill-opacity: 1;"></circle>
                            <circle cx="80" cy="20" r="5" style="z-index: 0; cursor: inherit; stroke: rgb(0, 0, 0); stroke-width: 5px; stroke-opacity: 1; stroke-dasharray: none; stroke-linecap: round; stroke-linejoin: round; fill: white; fill-opacity: 1;"></circle>
                            <circle cx="80" cy="40" r="5" style="z-index: 0; cursor: inherit; stroke: rgb(0, 0, 0); stroke-width: 5px; stroke-opacity: 1; stroke-dasharray: none; stroke-linecap: round; stroke-linejoin: round; fill: white; fill-opacity: 1;"></circle>
                            <circle cx="80" cy="60" r="5" style="z-index: 0; cursor: inherit; stroke: rgb(0, 0, 0); stroke-width: 5px; stroke-opacity: 1; stroke-dasharray: none; stroke-linecap: round; stroke-linejoin: round; fill: white; fill-opacity: 1;"></circle>
                            <circle cx="80" cy="80" r="5" style="z-index: 0; cursor: inherit; stroke: rgb(0, 0, 0); stroke-width: 5px; stroke-opacity: 1; stroke-dasharray: none; stroke-linecap: round; stroke-linejoin: round; fill: white; fill-opacity: 1;"></circle>
                        </svg>
                    </div>
                </td>
                <td>
                    <div id="carta_2^3" style="width: 100px; height: 100px; position: relative; overflow: hidden; cursor: default;">
                        <svg width="100" height="100" style="position: absolute; left: 0px; top: 0px;">
                            <rect x="0" y="0" width="100" height="100" rx="0" ry="0" transform="rotate(0,0,0)" style="z-index: 0; cursor: inherit; stroke: rgb(0, 0, 0); stroke-width: 5px; stroke-opacity: 1; stroke-dasharray: none; stroke-linecap: round; stroke-linejoin: round; fill: rgb(255, 255, 0); fill-opacity: 0.5;"></rect>
                            <circle cx="20" cy="20" r="5" style="z-index: 0; cursor: inherit; stroke: rgb(0, 0, 0); stroke-width: 5px; stroke-opacity: 1; stroke-dasharray: none; stroke-linecap: round; stroke-linejoin: round; fill: white; fill-opacity: 1;"></circle>
                            <circle cx="20" cy="40" r="5" style="z-index: 0; cursor: inherit; stroke: rgb(0, 0, 0); stroke-width: 5px; stroke-opacity: 1; stroke-dasharray: none; stroke-linecap: round; stroke-linejoin: round; fill: white; fill-opacity: 1;"></circle>
                            <circle cx="20" cy="60" r="5" style="z-index: 0; cursor: inherit; stroke: rgb(0, 0, 0); stroke-width: 5px; stroke-opacity: 1; stroke-dasharray: none; stroke-linecap: round; stroke-linejoin: round; fill: white; fill-opacity: 1;"></circle>
                            <circle cx="20" cy="80" r="5" style="z-index: 0; cursor: inherit; stroke: rgb(0, 0, 0); stroke-width: 5px; stroke-opacity: 1; stroke-dasharray: none; stroke-linecap: round; stroke-linejoin: round; fill: white; fill-opacity: 1;"></circle>
                            <circle cx="80" cy="20" r="5" style="z-index: 0; cursor: inherit; stroke: rgb(0, 0, 0); stroke-width: 5px; stroke-opacity: 1; stroke-dasharray: none; stroke-linecap: round; stroke-linejoin: round; fill: white; fill-opacity: 1;"></circle>
                            <circle cx="80" cy="40" r="5" style="z-index: 0; cursor: inherit; stroke: rgb(0, 0, 0); stroke-width: 5px; stroke-opacity: 1; stroke-dasharray: none; stroke-linecap: round; stroke-linejoin: round; fill: white; fill-opacity: 1;"></circle>
                            <circle cx="80" cy="60" r="5" style="z-index: 0; cursor: inherit; stroke: rgb(0, 0, 0); stroke-width: 5px; stroke-opacity: 1; stroke-dasharray: none; stroke-linecap: round; stroke-linejoin: round; fill: white; fill-opacity: 1;"></circle>
                            <circle cx="80" cy="80" r="5" style="z-index: 0; cursor: inherit; stroke: rgb(0, 0, 0); stroke-width: 5px; stroke-opacity: 1; stroke-dasharray: none; stroke-linecap: round; stroke-linejoin: round; fill: white; fill-opacity: 1;"></circle>
                        </svg>
                    </div>
                </td>
                <td>
                    <div id="carta_2^2" style="width: 100px; height: 100px; position: relative; overflow: hidden; cursor: default;">
                        <svg width="100" height="100" style="position: absolute; left: 0px; top: 0px;">
                            <rect x="0" y="0" width="100" height="100" rx="0" ry="0" transform="rotate(0,0,0)" style="z-index: 0; cursor: inherit; stroke: rgb(0, 0, 0); stroke-width: 5px; stroke-opacity: 1; stroke-dasharray: none; stroke-linecap: round; stroke-linejoin: round; fill: rgb(255, 255, 0); fill-opacity: 0.5;"></rect>
                            <circle cx="20" cy="20" r="5" style="z-index: 0; cursor: inherit; stroke: rgb(0, 0, 0); stroke-width: 5px; stroke-opacity: 1; stroke-dasharray: none; stroke-linecap: round; stroke-linejoin: round; fill: white; fill-opacity: 1;"></circle>
                            <circle cx="20" cy="80" r="5" style="z-index: 0; cursor: inherit; stroke: rgb(0, 0, 0); stroke-width: 5px; stroke-opacity: 1; stroke-dasharray: none; stroke-linecap: round; stroke-linejoin: round; fill: white; fill-opacity: 1;"></circle>
                            <circle cx="80" cy="20" r="5" style="z-index: 0; cursor: inherit; stroke: rgb(0, 0, 0); stroke-width: 5px; stroke-opacity: 1; stroke-dasharray: none; stroke-linecap: round; stroke-linejoin: round; fill: white; fill-opacity: 1;"></circle>
                            <circle cx="80" cy="80" r="5" style="z-index: 0; cursor: inherit; stroke: rgb(0, 0, 0); stroke-width: 5px; stroke-opacity: 1; stroke-dasharray: none; stroke-linecap: round; stroke-linejoin: round; fill: white; fill-opacity: 1;"></circle>
                        </svg>
                    </div>
                </td>
                <td>
                    <div id="carta_2^1" style="width: 100px; height: 100px; position: relative; overflow: hidden; cursor: default;">
                        <svg width="100" height="100" style="position: absolute; left: 0px; top: 0px;">
                            <rect x="0" y="0" width="100" height="100" rx="0" ry="0" transform="rotate(0,0,0)" style="z-index: 0; cursor: inherit; stroke: rgb(0, 0, 0); stroke-width: 5px; stroke-opacity: 1; stroke-dasharray: none; stroke-linecap: round; stroke-linejoin: round; fill: rgb(255, 255, 0); fill-opacity: 0.5;"></rect>
                            <circle cx="20" cy="80" r="5" style="z-index: 0; cursor: inherit; stroke: rgb(0, 0, 0); stroke-width: 5px; stroke-opacity: 1; stroke-dasharray: none; stroke-linecap: round; stroke-linejoin: round; fill: white; fill-opacity: 1;"></circle>
                            <circle cx="80" cy="20" r="5" style="z-index: 0; cursor: inherit; stroke: rgb(0, 0, 0); stroke-width: 5px; stroke-opacity: 1; stroke-dasharray: none; stroke-linecap: round; stroke-linejoin: round; fill: white; fill-opacity: 1;"></circle>
                        </svg>
                    </div>
                </td>
                <td>
                    <div id="carta_2^0" style="width: 100px; height: 100px; position: relative; overflow: hidden; cursor: default;">
                        <svg width="100" height="100" style="position: absolute; left: 0px; top: 0px;">
                            <rect x="0" y="0" width="100" height="100" rx="0" ry="0" transform="rotate(0,0,0)" style="z-index: 0; cursor: inherit; stroke: rgb(0, 0, 0); stroke-width: 5px; stroke-opacity: 1; stroke-dasharray: none; stroke-linecap: round; stroke-linejoin: round; fill: rgb(255, 255, 0); fill-opacity: 0.5;"></rect>
                            <circle cx="50" cy="50" r="5" style="z-index: 0; cursor: inherit; stroke: rgb(0, 0, 0); stroke-width: 5px; stroke-opacity: 1; stroke-dasharray: none; stroke-linecap: round; stroke-linejoin: round; fill: white; fill-opacity: 1;"></circle>
                        </svg>
                    </div>
                </td>
                <td>
                    <div id="dorso" style="width: 100px; height: 100px; position: relative; overflow: hidden; cursor: default;">
                        <svg width="100" height="100" style="position: absolute; left: 0px; top: 0px;">
                            <rect x="0" y="0" width="100" height="100" rx="0" ry="0" transform="rotate(0,0,0)" style="z-index: 0; cursor: inherit; stroke: rgb(0, 0, 0); stroke-width: 5px; stroke-opacity: 1; stroke-dasharray: none; stroke-linecap: round; stroke-linejoin: round; fill: rgb(15, 15, 0); fill-opacity: 0.5;"></rect>
                        </svg>
                    </div>
                </td>
            </tr>
            <tr>
                <th>(Numero)<sub>2</sub></th>
                <td style="text-align:center;">
                    <input id="d4" type="number" name="quantity" min="0" max="1" value="1">
                </td>
                <td style="text-align:center;">
                    <input id="d3" type="number" name="quantity" min="0" max="1" value="1">
                </td>
                <td style="text-align:center;">
                    <input id="d2" type="number" name="quantity" min="0" max="1" value="1">
                </td>
                <td style="text-align:center;">
                    <input id="d1" type="number" name="quantity" min="0" max="1" value="1">
                </td>
                <td style="text-align:center;">
                    <input id="d0" type="number" name="quantity" min="0" max="1" value="1">
                </td>
                <td style="text-align:center;" id="valore">31</td>
            </tr>
			<tr>
				<th>Algebricamente</th>
				<td colspan="6">
					(<span id="b4">1</span>
					<span id="b3">1</span>
					<span id="b2">1</span>
					<span id="b1">1</span>
					<span id="b0">1</span>)<sub>2</sub>
					=
					<span id="v4">1</span> x 16 +
					<span id="v3">1</span> x  8 +
					<span id="v2">1</span> x  4 +
					<span id="v1">1</span> x  2 +
					<span id="v0">1</span> x  1 =
					
					<span id="somma_mintermini">16 + 8 + 4 + 2 + 1</span>
					= 
					(<span id="decimale">31</span>)<sub>10</sub>
				</td>
			</tr>
			
        </table>
        <script type="text/javascript">
		
			/*
			var posizionePuntini = [
				// 2^0
				[{x: 50, y: 50}],
				// 2^1
				[{x: 20, y: 80}, {x: 80, y: 20}],
				// 2^2
				[{x: 20, y: 20}, {x: 20, y: 80}, {x: 80, y: 20}, {x: 80, y: 80}],
				// 2^3
				[{x: 20, y: 20}, {x: 20, y: 40}, {x: 20, y: 60}, {x: 20, y: 80},
				 {x: 80, y: 20}, {x: 80, y: 40}, {x: 80, y: 60}, {x: 80, y: 80}],
				// 2^4
				[{x: 20, y: 20}, {x: 20, y: 40}, {x: 20, y: 60}, {x: 20, y: 80},
				 {x: 40, y: 20}, {x: 40, y: 40}, {x: 40, y: 60}, {x: 40, y: 80},
				 {x: 60, y: 20}, {x: 60, y: 40}, {x: 60, y: 60}, {x: 60, y: 80},
				 {x: 80, y: 20}, {x: 80, y: 40}, {x: 80, y: 60}, {x: 80, y: 80}]
			];
			
			for (var posizione = 0; posizione < 5; posizione++) {
				var carta = new jsgl.Panel(document.getElementById("carta_2^" + posizione));
				var bordo = carta.createRectangle();
				bordo.setSize(new jsgl.Vector2D(100, 100));
				bordo.getStroke().setWeight(5);
				bordo.getStroke().setColor("rgb(0,0,0)");
				bordo.getFill().setColor("rgb(255,255,0)");
				bordo.getFill().setOpacity(0.5);
				carta.addElement(bordo);
				var puntini = posizionePuntini[posizione];
				for (var punto = 0; punto < puntini.length; punto++) {
					//console.log(puntini[punto]);
					cerchio = carta.createCircle();
					cerchio.setCenterLocationXY(puntini[punto].x, puntini[punto].y);
					cerchio.setRadius(5);
					cerchio.getStroke().setWeight(5);
					cerchio.getStroke().setColor("rgb(0,0,0)");
					carta.addElement(cerchio);
				}
			  }
			 var dorso = new jsgl.Panel(document.getElementById("dorso"));
			 var bordo = dorso.createRectangle();
			 bordo.setSize(new jsgl.Vector2D(100, 100));
			 bordo.getStroke().setWeight(5);
			 bordo.getStroke().setColor("rgb(0,0,0)");
			 bordo.getFill().setColor("rgb(10,10,0)");
			 bordo.getFill().setOpacity(0.5);
			 dorso.addElement(bordo);
			*/
			
			var immagini = [];
			
			var clone = function() {
				for (var posizione = 0; posizione < 5; posizione++) {
					immagini[posizione] = document.getElementById("carta_2^" + posizione).firstElementChild;
					immagini[5 + posizione] = document.getElementById("dorso").firstElementChild.cloneNode(true);
				}
				document.getElementById("dorso").style.visibility="hidden";
			}
			
			var aggiornaValore = function() {
				var numeroInBase10 =
					16 * Number(document.getElementById("d4").value) +
					 8 * Number(document.getElementById("d3").value) +
					 4 * Number(document.getElementById("d2").value) +
					 2 * Number(document.getElementById("d1").value) +
					 1 * Number(document.getElementById("d0").value);
				document.getElementById("valore").innerHTML = numeroInBase10;
				document.getElementById("decimale").innerHTML = numeroInBase10;
			}
			
			var aggiornaVistaCarte = function(evt) {
				var posizione = evt.target.id[1];
				var carta = document.getElementById("carta_2^" + posizione);
				if (evt.target.value == 0) {
					carta.replaceChild(immagini[5 + Number(posizione)], carta.firstElementChild);
				} else {
					carta.replaceChild(immagini[Number(posizione)], carta.firstElementChild);
				}
			};
			
			var aggiornaVistaAlgebrica = function(evt) {
				var posizione = evt.target.id[1];
				var coefficiente = document.getElementById("v" + posizione);
				var cifraBinaria = document.getElementById("b" + posizione);
				if (evt.target.value == 0) {
					coefficiente.innerHTML = 0;
					cifraBinaria.innerHTML = 0;
				} else {
					coefficiente.innerHTML = 1;
					cifraBinaria.innerHTML = 1;
				}
				var espressione = document.getElementById("d4").value == "1"?"16":"";
				for (var pos = 3; pos >= 0; pos--) {
					if (document.getElementById("d" + pos).value == "1") {
						if (espressione.length != 0) {
							espressione += " + ";
						}
						espressione += Math.pow(2, pos);
					}
				}
				document.getElementById("somma_mintermini").innerHTML = (espressione.length === 0)?0:espressione;
			};
			
			var aggiornaVista = function(evt) {
				aggiornaVistaCarte(evt);
				aggiornaVistaAlgebrica(evt);
			};	
			
			var aggiorna = function(evt) {
				aggiornaValore();
				aggiornaVista(evt);
			};

			var cifre = document.getElementsByTagName("input");
			for (var cifra = 0; cifra < 5; cifra++) {
				cifre[cifra].onchange = aggiorna;
			}
			
			document.addEventListener("onload",init(),false)
            function init()
            {
                clone();
            }
		
        </script>
    </body>
</html>
